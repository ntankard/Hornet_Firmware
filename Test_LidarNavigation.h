#pragma once

#include "LidarNavigation.h"

#if BUILD_TYPE == FOR_TEST

test(LidarNavigation_LidarData02_FindingFeatures)
{
	//2 good features, 1 bad feature
	LidarNavigation _lidarNavigation;
	_lidarNavigation.processLidarData(358.5469, 1815.3);
	_lidarNavigation.processLidarData(359.7969, 1814.8);
	_lidarNavigation.processLidarData(1.0313, 1816.3);
	_lidarNavigation.processLidarData(2.3125, 1815.5);
	_lidarNavigation.processLidarData(3.5469, 1812.5);
	_lidarNavigation.processLidarData(4.8281, 1818.5);
	_lidarNavigation.processLidarData(6.0625, 1822.3);
	_lidarNavigation.processLidarData(7.2813, 1832);
	_lidarNavigation.processLidarData(8.5625, 1841.3);
	_lidarNavigation.processLidarData(9.75, 1845.3);
	_lidarNavigation.processLidarData(11.0313, 1855.5);
	_lidarNavigation.processLidarData(12.2656, 1866);
	_lidarNavigation.processLidarData(13.5, 1882.5);
	_lidarNavigation.processLidarData(14.7969, 1892.8);
	_lidarNavigation.processLidarData(16, 1905.3);
	_lidarNavigation.processLidarData(17.25, 1917);
	_lidarNavigation.processLidarData(18.5, 1930.5);
	_lidarNavigation.processLidarData(19.7031, 1945.5);
	_lidarNavigation.processLidarData(20.9844, 1958.8);
	_lidarNavigation.processLidarData(22.2031, 1979);
	_lidarNavigation.processLidarData(23.4688, 2000.8);
	_lidarNavigation.processLidarData(24.6563, 2022);
	_lidarNavigation.processLidarData(25.9219, 2040);
	_lidarNavigation.processLidarData(27.1563, 2065.3);
	_lidarNavigation.processLidarData(28.4063, 2092);
	_lidarNavigation.processLidarData(29.6563, 2117);
	_lidarNavigation.processLidarData(30.8906, 2136);
	_lidarNavigation.processLidarData(32.125, 2169.5);
	_lidarNavigation.processLidarData(33.375, 2191.8);
	_lidarNavigation.processLidarData(34.5938, 2219.8);
	_lidarNavigation.processLidarData(35.8594, 2262.3);
	_lidarNavigation.processLidarData(37.0781, 2301);
	_lidarNavigation.processLidarData(38.3438, 2350.8);
	_lidarNavigation.processLidarData(39.5625, 2391);
	_lidarNavigation.processLidarData(40.75, 2435.5);
	_lidarNavigation.processLidarData(42, 2405.3);
	_lidarNavigation.processLidarData(43.25, 2351.5);
	_lidarNavigation.processLidarData(44.5313, 2297.5);
	_lidarNavigation.processLidarData(45.8125, 2247.5);
	_lidarNavigation.processLidarData(47.0781, 2204.3);
	_lidarNavigation.processLidarData(48.2969, 2171);
	_lidarNavigation.processLidarData(49.5625, 2134.3);
	_lidarNavigation.processLidarData(50.8125, 2095.5);
	_lidarNavigation.processLidarData(52.0938, 2065.8);
	_lidarNavigation.processLidarData(53.3594, 2035.5);
	_lidarNavigation.processLidarData(54.5781, 2007.5);
	_lidarNavigation.processLidarData(55.875, 1976.5);
	_lidarNavigation.processLidarData(57.0938, 1946.3);
	_lidarNavigation.processLidarData(58.375, 1928);
	_lidarNavigation.processLidarData(59.625, 1898.3);
	_lidarNavigation.processLidarData(60.875, 1883.8);
	_lidarNavigation.processLidarData(62.125, 1855);
	_lidarNavigation.processLidarData(63.375, 1840);
	_lidarNavigation.processLidarData(64.7813, 1818.8);
	_lidarNavigation.processLidarData(66.0469, 1799);
	_lidarNavigation.processLidarData(67.2813, 1787);
	_lidarNavigation.processLidarData(68.5, 1769.3);
	_lidarNavigation.processLidarData(69.7813, 1759);
	_lidarNavigation.processLidarData(71.0469, 1744.3);
	_lidarNavigation.processLidarData(72.2813, 1739);
	_lidarNavigation.processLidarData(73.5781, 1726);
	_lidarNavigation.processLidarData(74.7969, 1721);
	_lidarNavigation.processLidarData(76.0781, 1709.5);
	_lidarNavigation.processLidarData(77.3594, 1705.5);
	_lidarNavigation.processLidarData(78.6094, 1701);
	_lidarNavigation.processLidarData(79.8125, 1690.3);
	_lidarNavigation.processLidarData(81.0938, 1684.8);
	_lidarNavigation.processLidarData(82.375, 1681);
	_lidarNavigation.processLidarData(83.5938, 1679.5);
	_lidarNavigation.processLidarData(84.8594, 1678.8);
	_lidarNavigation.processLidarData(86.1094, 1672.8);
	_lidarNavigation.processLidarData(87.3906, 1672.5);
	_lidarNavigation.processLidarData(88.6406, 1672.3);
	_lidarNavigation.processLidarData(89.9219, 1673.5);
	_lidarNavigation.processLidarData(91.1719, 1679.3);
	_lidarNavigation.processLidarData(92.4531, 1682.5);
	_lidarNavigation.processLidarData(93.6563, 1688.3);
	_lidarNavigation.processLidarData(94.9375, 1689.8);
	_lidarNavigation.processLidarData(96.1875, 1701);
	_lidarNavigation.processLidarData(97.3906, 1703);
	_lidarNavigation.processLidarData(98.6719, 1707.8);
	_lidarNavigation.processLidarData(99.8906, 1716.8);
	_lidarNavigation.processLidarData(101.1719, 1724);
	_lidarNavigation.processLidarData(102.4531, 1736.8);
	_lidarNavigation.processLidarData(103.6563, 1741.5);
	_lidarNavigation.processLidarData(104.8906, 1755.8);
	_lidarNavigation.processLidarData(106.1719, 1766.3);
	_lidarNavigation.processLidarData(107.4375, 1778);
	_lidarNavigation.processLidarData(108.6875, 1789.8);
	_lidarNavigation.processLidarData(109.9219, 1810.3);
	_lidarNavigation.processLidarData(110.9531, 2492);
	_lidarNavigation.processLidarData(112.2188, 2511.8);
	_lidarNavigation.processLidarData(113.4844, 2538.3);
	_lidarNavigation.processLidarData(114.7031, 2562);
	_lidarNavigation.processLidarData(115.9688, 2596.5);
	_lidarNavigation.processLidarData(117.2188, 2621.5);
	_lidarNavigation.processLidarData(118.4531, 2658.8);
	_lidarNavigation.processLidarData(119.7188, 2695.8);
	_lidarNavigation.processLidarData(120.9531, 2725.8);
	_lidarNavigation.processLidarData(122.2031, 2754.8);
	_lidarNavigation.processLidarData(123.4688, 2803.8);
	_lidarNavigation.processLidarData(124.8906, 2113.5);
	_lidarNavigation.processLidarData(126.1563, 2123.3);
	_lidarNavigation.processLidarData(127.3906, 2131);
	_lidarNavigation.processLidarData(128.6563, 2118.3);
	_lidarNavigation.processLidarData(131.1875, 2104.3);
	_lidarNavigation.processLidarData(132.4375, 2104.3);
	_lidarNavigation.processLidarData(137.3906, 2160.5);
	_lidarNavigation.processLidarData(138.6719, 2045.5);
	_lidarNavigation.processLidarData(139.9531, 2026);
	_lidarNavigation.processLidarData(141.1563, 2083.8);
	_lidarNavigation.processLidarData(142.3906, 2148.8);
	_lidarNavigation.processLidarData(143.7031, 2099);
	_lidarNavigation.processLidarData(144.9531, 2110.3);
	_lidarNavigation.processLidarData(146.2188, 2110.3);
	_lidarNavigation.processLidarData(147.4219, 2134.8);
	_lidarNavigation.processLidarData(148.6875, 2179.5);
	_lidarNavigation.processLidarData(149.9375, 2162);
	_lidarNavigation.processLidarData(151.1719, 2171);
	_lidarNavigation.processLidarData(152.4531, 2147.8);
	_lidarNavigation.processLidarData(153.6719, 2124.8);
	_lidarNavigation.processLidarData(154.9531, 2099.5);
	_lidarNavigation.processLidarData(156.2031, 2090);
	_lidarNavigation.processLidarData(157.4844, 2066.3);
	_lidarNavigation.processLidarData(158.75, 2042);
	_lidarNavigation.processLidarData(160.125, 1662.5);
	_lidarNavigation.processLidarData(161.3438, 1723.8);
	_lidarNavigation.processLidarData(162.5625, 1863);
	_lidarNavigation.processLidarData(163.75, 2028.8);
	_lidarNavigation.processLidarData(164.9844, 2022.8);
	_lidarNavigation.processLidarData(166.2813, 1965);
	_lidarNavigation.processLidarData(167.5313, 1956);
	_lidarNavigation.processLidarData(168.7813, 1945.8);
	_lidarNavigation.processLidarData(170.0469, 1930.5);
	_lidarNavigation.processLidarData(171.3125, 1931.3);
	_lidarNavigation.processLidarData(172.5156, 1928.5);
	_lidarNavigation.processLidarData(183.7969, 1939.8);
	_lidarNavigation.processLidarData(184.9531, 1937.3);
	_lidarNavigation.processLidarData(186.2188, 1939);
	_lidarNavigation.processLidarData(187.4844, 1940.8);
	_lidarNavigation.processLidarData(188.7188, 1943.8);
	_lidarNavigation.processLidarData(189.9531, 1964.3);
	_lidarNavigation.processLidarData(191.1719, 1968.5);
	_lidarNavigation.processLidarData(192.4219, 1973);
	_lidarNavigation.processLidarData(193.6719, 1996.8);
	_lidarNavigation.processLidarData(194.9375, 2003.5);
	_lidarNavigation.processLidarData(196.125, 2015.8);
	_lidarNavigation.processLidarData(197.4219, 2034.5);
	_lidarNavigation.processLidarData(198.6719, 2042.5);
	_lidarNavigation.processLidarData(199.9063, 2063.5);
	_lidarNavigation.processLidarData(201.1563, 2081.3);
	_lidarNavigation.processLidarData(202.3906, 2095.8);
	_lidarNavigation.processLidarData(203.6094, 2111.8);
	_lidarNavigation.processLidarData(204.8594, 2128.8);
	_lidarNavigation.processLidarData(206.0781, 2161.3);
	_lidarNavigation.processLidarData(207.3281, 2186.5);
	_lidarNavigation.processLidarData(208.6406, 2197);
	_lidarNavigation.processLidarData(209.8906, 2234.3);
	_lidarNavigation.processLidarData(211.125, 2267);
	_lidarNavigation.processLidarData(212.375, 2312.8);
	_lidarNavigation.processLidarData(213.5938, 2352);
	_lidarNavigation.processLidarData(214.8281, 2387.8);
	_lidarNavigation.processLidarData(216.0781, 2421.5);
	_lidarNavigation.processLidarData(217.3438, 2391.3);
	_lidarNavigation.processLidarData(218.6094, 2357.8);
	_lidarNavigation.processLidarData(219.875, 2284.5);
	_lidarNavigation.processLidarData(221.125, 2224.3);
	_lidarNavigation.processLidarData(222.4219, 2173.8);
	_lidarNavigation.processLidarData(223.6406, 2133);
	_lidarNavigation.processLidarData(224.8906, 2091.8);
	_lidarNavigation.processLidarData(226.1875, 2039.3);
	_lidarNavigation.processLidarData(227.4531, 1991.8);
	_lidarNavigation.processLidarData(228.7188, 1965);
	_lidarNavigation.processLidarData(229.9844, 1928.8);
	_lidarNavigation.processLidarData(231.2344, 1892.5);
	_lidarNavigation.processLidarData(232.5313, 1852.8);
	_lidarNavigation.processLidarData(233.9063, 1822.3);
	_lidarNavigation.processLidarData(235.1719, 1795.8);
	_lidarNavigation.processLidarData(236.4531, 1761);
	_lidarNavigation.processLidarData(237.7031, 1788.5);
	_lidarNavigation.processLidarData(238.9531, 1796.5);
	_lidarNavigation.processLidarData(240.1719, 1776.3);
	_lidarNavigation.processLidarData(241.4844, 1758.3);
	_lidarNavigation.processLidarData(242.75, 1745.5);
	_lidarNavigation.processLidarData(243.9688, 1725.5);
	_lidarNavigation.processLidarData(245.2656, 1709);
	_lidarNavigation.processLidarData(246.5313, 1697.5);
	_lidarNavigation.processLidarData(247.8125, 1682.3);
	_lidarNavigation.processLidarData(249.0156, 1670.8);
	_lidarNavigation.processLidarData(250.2813, 1660);
	_lidarNavigation.processLidarData(251.5938, 1645.5);
	_lidarNavigation.processLidarData(252.8281, 1635.5);
	_lidarNavigation.processLidarData(254.0781, 1627.3);
	_lidarNavigation.processLidarData(255.3281, 1618.5);
	_lidarNavigation.processLidarData(256.625, 1610.5);
	_lidarNavigation.processLidarData(257.875, 1602.8);
	_lidarNavigation.processLidarData(259.125, 1599.3);
	_lidarNavigation.processLidarData(260.375, 1593.5);
	_lidarNavigation.processLidarData(261.5781, 1588.3);
	_lidarNavigation.processLidarData(262.8906, 1585.8);
	_lidarNavigation.processLidarData(264.1563, 1584);
	_lidarNavigation.processLidarData(265.3438, 1582.5);
	_lidarNavigation.processLidarData(266.6094, 1582.3);
	_lidarNavigation.processLidarData(267.8906, 1581.5);
	_lidarNavigation.processLidarData(269.1563, 1582.8);
	_lidarNavigation.processLidarData(270.4219, 1584.3);
	_lidarNavigation.processLidarData(271.6719, 1584.5);
	_lidarNavigation.processLidarData(272.9219, 1586.8);
	_lidarNavigation.processLidarData(274.125, 1589.8);
	_lidarNavigation.processLidarData(275.4063, 1591.3);
	_lidarNavigation.processLidarData(276.6719, 1602);
	_lidarNavigation.processLidarData(277.9531, 1604.5);
	_lidarNavigation.processLidarData(279.1719, 1617.8);
	_lidarNavigation.processLidarData(280.4063, 1625.3);
	_lidarNavigation.processLidarData(281.6406, 1634.3);
	_lidarNavigation.processLidarData(282.875, 1643.5);
	_lidarNavigation.processLidarData(284.0781, 1657.3);
	_lidarNavigation.processLidarData(285.3281, 1667.8);
	_lidarNavigation.processLidarData(286.625, 1679.5);
	_lidarNavigation.processLidarData(287.8125, 1695);
	_lidarNavigation.processLidarData(289.125, 1705.5);
	_lidarNavigation.processLidarData(290.3281, 1717.5);
	_lidarNavigation.processLidarData(291.5781, 1733.5);
	_lidarNavigation.processLidarData(292.8438, 1750.5);
	_lidarNavigation.processLidarData(294.0625, 1767.8);
	_lidarNavigation.processLidarData(295.2969, 1782.3);
	_lidarNavigation.processLidarData(296.5313, 1816.3);
	_lidarNavigation.processLidarData(297.7656, 1839.8);
	_lidarNavigation.processLidarData(299.0313, 1862.3);
	_lidarNavigation.processLidarData(300.2969, 1886.5);
	_lidarNavigation.processLidarData(301.5469, 1916.3);
	_lidarNavigation.processLidarData(302.7813, 1936.8);
	_lidarNavigation.processLidarData(304.0156, 1967.3);
	_lidarNavigation.processLidarData(305.2031, 2001.5);
	_lidarNavigation.processLidarData(306.4219, 2036.5);
	_lidarNavigation.processLidarData(307.6875, 2069.5);
	_lidarNavigation.processLidarData(308.9375, 2109);
	_lidarNavigation.processLidarData(310.1563, 2156.3);
	_lidarNavigation.processLidarData(311.4219, 2188);
	_lidarNavigation.processLidarData(312.6406, 2223.3);
	_lidarNavigation.processLidarData(313.875, 2282.5);
	_lidarNavigation.processLidarData(315.125, 2349.8);
	_lidarNavigation.processLidarData(316.3438, 2406);
	_lidarNavigation.processLidarData(317.5781, 2387.8);
	_lidarNavigation.processLidarData(318.8438, 2338);
	_lidarNavigation.processLidarData(320.1094, 2297.5);
	_lidarNavigation.processLidarData(321.3594, 2259.3);
	_lidarNavigation.processLidarData(322.6406, 2219.3);
	_lidarNavigation.processLidarData(323.8906, 2190.5);
	_lidarNavigation.processLidarData(325.1406, 2163.5);
	_lidarNavigation.processLidarData(326.4219, 2145);
	_lidarNavigation.processLidarData(327.6563, 2119.3);
	_lidarNavigation.processLidarData(329.0156, 2092.5);
	_lidarNavigation.processLidarData(330.2656, 2065.3);
	_lidarNavigation.processLidarData(331.5469, 2039.5);
	_lidarNavigation.processLidarData(332.7969, 2022.3);
	_lidarNavigation.processLidarData(334.0781, 2000.8);
	_lidarNavigation.processLidarData(335.3125, 1972.8);
	_lidarNavigation.processLidarData(336.5938, 1963.3);
	_lidarNavigation.processLidarData(337.8594, 1943);
	_lidarNavigation.processLidarData(339.1094, 1929.3);
	_lidarNavigation.processLidarData(340.375, 1909.5);
	_lidarNavigation.processLidarData(341.5781, 1903.5);
	_lidarNavigation.processLidarData(342.8906, 1886);
	_lidarNavigation.processLidarData(344.1563, 1868.3);
	_lidarNavigation.processLidarData(345.375, 1864);
	_lidarNavigation.processLidarData(346.6094, 1855.3);
	_lidarNavigation.processLidarData(347.8906, 1844.5);
	_lidarNavigation.processLidarData(349.1406, 1841);
	_lidarNavigation.processLidarData(350.4375, 1832);
	_lidarNavigation.processLidarData(351.6875, 1828.8);
	_lidarNavigation.processLidarData(352.9063, 1820.5);
	_lidarNavigation.processLidarData(354.1563, 1819);
	_lidarNavigation.processLidarData(355.375, 1818);
	_lidarNavigation.processLidarData(356.6406, 1816.5);
	_lidarNavigation.processLidarData(357.8906, 1815.8);
	DoublyLinkedNodeIterator<Feature> iter(*_lidarNavigation.getFeatureManager()->getFeatureList());
	iter++;
	for (int i = _lidarNavigation.getFeatureManager()->featureListSize(); i > 0; i--)
	{
		Serial.println("Feature found at angle: ");
		float x = iter.getNode()->getValue().getEnterEndX();
		float y = iter.getNode()->getValue().getEnterEndY();
		float angle = atan(y / x) * 180 / PI;
		Serial.println(angle);
		iter++;
	}	
}



#endif;
